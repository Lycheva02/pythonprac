From 5201a55e389fdca5006e3b737eaacb54ae3f3e60 Mon Sep 17 00:00:00 2001
From: Lycheva Ekaterina <s02200433@gse.cs.msu.ru>
Date: Sun, 19 Mar 2023 09:39:02 +0300
Subject: [PATCH 2/3] =?UTF-8?q?=D0=9A=D0=BE=D1=80=D0=BE=D0=B2=D1=8B=20?=
 =?UTF-8?q?=D0=B4=D0=BE=D0=B1=D0=B0=D0=B2=D0=BB=D0=B5=D0=BD=D1=8B=20=D0=B2?=
 =?UTF-8?q?=20=D0=BF=D0=B5=D1=80=D0=B5=D0=BC=D0=B5=D1=89=D0=B5=D0=BD=D0=B8?=
 =?UTF-8?q?=D0=B5?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 20230313/1/client.py | 41 +++++++++++++++++++++++++++++++++++++----
 1 file changed, 37 insertions(+), 4 deletions(-)

diff --git a/20230313/1/client.py b/20230313/1/client.py
index c7b8a7b..8c6ae15 100644
--- a/20230313/1/client.py
+++ b/20230313/1/client.py
@@ -41,7 +41,15 @@ class Gameplay(cmd.Cmd):
             print("Invalid arguments")
             return 0
         self.socket.send('move -1 0\n'.encode())
-        print(self.socket.recv(1024).decode())
+        data = self.socket.recv(1024).decode()
+        data = data.split('\n')
+        print(data[0])
+        if len(data) == 2:
+            data = data[1].split()
+            if  data[0] == 'jgsbat':
+                print(cowsay(data[1], cowfile=custom_cow))
+            else:
+                print(cowsay(data[1], cow=data[0]))
 
     def do_right(self, args):
         '''Move one step right'''
@@ -49,7 +57,15 @@ class Gameplay(cmd.Cmd):
             print("Invalid arguments")
             return 0
         self.socket.send('move 1 0\n'.encode())
-        print(self.socket.recv(1024).decode())
+        data = self.socket.recv(1024).decode()
+        data = data.split('\n')
+        print(data[0])
+        if len(data) == 2:
+            data = data[1].split()
+            if  data[0] == 'jgsbat':
+                print(cowsay(data[1], cowfile=custom_cow))
+            else:
+                print(cowsay(data[1], cow=data[0]))
 
     def do_up(self, args):
         '''Move one step up'''
@@ -57,7 +73,15 @@ class Gameplay(cmd.Cmd):
             print("Invalid arguments")
             return 0
         self.socket.send('move 0 -1\n'.encode())
-        print(self.socket.recv(1024).decode())
+        data = self.socket.recv(1024).decode()
+        data = data.split('\n')
+        print(data[0])
+        if len(data) == 2:
+            data = data[1].split()
+            if  data[0] == 'jgsbat':
+                print(cowsay(data[1], cowfile=custom_cow))
+            else:
+                print(cowsay(data[1], cow=data[0]))
 
     def do_down(self, args):
         '''Move one step down'''
@@ -65,7 +89,15 @@ class Gameplay(cmd.Cmd):
             print("Invalid arguments")
             return 0
         self.socket.send('move 0 1\n'.encode())
-        print(self.socket.recv(1024).decode())
+        data = self.socket.recv(1024).decode()
+        data = data.split('\n')
+        print(data[0])
+        if len(data) == 2:
+            data = data[1].split()
+            if  data[0] == 'jgsbat':
+                print(cowsay(data[1], cowfile=custom_cow))
+            else:
+                print(cowsay(data[1], cow=data[0]))
 
     def do_addmon(self, args):
         ''' Add a monster:  addmon <name> coord <x> <y> hello <message> hp <health points>'''
@@ -123,6 +155,7 @@ class Gameplay(cmd.Cmd):
 
     def do_quit(self, args):
         '''Exit the game'''
+        self.socket.close()
         return 1
 
     def do_EOF(self, args):
-- 
2.25.1

